{% extends 'base.html.twig' %}

{% block title %}Description{% endblock %}
 {% block javascripts %}
 <script type="text/javascript" src="../../js/form.js">
 
 </script>
 {% endblock %}
{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<main class="example-wrapper">
    <h1 class='text-center text-decoration-underline my-5'>Description</h1>
    {# <ul>

        <li>{{ book.getTitle() }}</li>
        <li>{{ book.getWriterid().getFirstname() }} {{ book.getWriterid().getLastname() }}</li>
        <li>{{ book.getPlot() }}</li>
        <li>{{ book.getPublicationDate() }}</li>
        <li>{{ book.getCategoryid().getName() }}</li>
        <li>{{ book.getLanguageid().getName() }}</li>
        <li>{{ book.getStatusid().getName() }}</li>
        {% if book.getStatusid().getName() is same as("Disponible") %}
        <li><button class="btn btn-danger" onclick="displayForm()">Emprunter</button></li>
        <div id="borrowingForm" class="d-none">
        {{form(form)}}
        </div>
        {% elseif book.getStatusid().getName() is same as("Emprunté") or book.getStatusid().getName() is same as("Réservé") %}
        <li>{{ book.getUser().getFirstname() }} {{ book.getUser().getLastname() }} Possède le livre</li>
        <li>Date de retour : {{ book.getReturningDate().format('Y-m-d') }}</li>
        <a name="" id="" class="btn btn-primary" href="{{ path('book_return', {'id': book.getId()} )}}" role="button">RETOUR</a>
        {% endif %}
        <br>
    </ul> #}

    <div class="card">
        <h5 class="card-header">{{ book.getTitle() }}, {{ book.getWriterid().getFirstname() }} {{ book.getWriterid().getLastname() }}</h5>
        <div class="card-body">
          <h5 class="card-title">{{ book.getPublicationDate() }}, {{ book.getCategoryid().getName() }}, {{ book.getLanguageid().getName() }}</h5>
          <p class="card-text">{{ book.getPlot() }}</p>
          <p class="card-text text-center">{{ book.getStatusid().getName() }}</p>
        </div>
    </div>

    {% if book.getStatusid().getName() is same as("Disponible") %}
        <button class="btn btn-danger" onclick="displayForm()">Emprunter</button>
        <div id="borrowingForm" class="d-none">
            {{form(form)}}
        </div>
    {% elseif book.getStatusid().getName() is same as("Emprunté") or book.getStatusid().getName() is same as("Réservé") %}
    <table class='table table-striped text-center'>
        <tr>
            <th colspan="2">Informations sur l'emprunteur:</th>
        </tr>
        <tr>
            <td>Nom:</td>
            <td>{{book.getUser().getFirstname()}} {{book.getUser().getLastname()}}</td>
        </tr>
        <tr>
            <td>Date d'emprunt:</td>
            <td>{{book.getBorrowingDate().format('Y-m-d')}}</td>
        </tr>
        <tr>
            <td>Date de retour:</td>
            <td>{{book.getReturningDate().format('Y-m-d')}}</td>
        </tr>
    </table>
    <a class='btn btn-dark' href='{{path('book_return', {id: book.getId()})}}'>Livre rendu</a>
    {% endif %}

</main>
{% endblock %}